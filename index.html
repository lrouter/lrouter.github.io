<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="简单的背后并不简单">
<meta name="keywords" content="云计算 linux 网络">
<meta property="og:type" content="website">
<meta property="og:title" content="lrouter的博客">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;index.html">
<meta property="og:site_name" content="lrouter的博客">
<meta property="og:description" content="简单的背后并不简单">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>lrouter的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">lrouter的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/11/ovs%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%87%A0%E7%A7%8DOpenflow%E6%89%A9%E5%B1%95%E6%B6%88%E6%81%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lrouter">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lrouter的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/11/ovs%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%87%A0%E7%A7%8DOpenflow%E6%89%A9%E5%B1%95%E6%B6%88%E6%81%AF/" itemprop="url">ovs实现的几种Openflow扩展消息</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-11T22:48:09+08:00">
                2019-12-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前言<br>openflow是一个标准的交换机配置协议，主要用于SDN控制面下发流表给交换机设备。openflow支持很多厂家的交换机，包括硬件白牌交换机，以及openvswitch。</p>
<p>openflow协议定义了一系列标准的行为，是所有交换机都需要支持的，但是也定义了一些可扩展的行为，由各交换机厂家自己去实现。</p>
<p>openflow使用“experiment” 类型来描述可扩展的消息，各交换机厂家将自己定义的可扩展消息包含在“experiment” 类型的openflow消息总。</p>
<p>本文所描述的是openvswitch实现的一些可扩展消息，它们基于 “experiment” 类型的openflow消息。他们也是ovsctl C库和ofpcontroller中会使用到的消息。</p>
<p>“experiment”消息的格式如下：</p>
<p>Index    字段    占用空间<br>0    openflow header<br>1    ExperimenterId    uint32<br>2    ExpType    uint32<br>其中 ExperimenterId = 0x00002320，表示 Openvswitch实现的可扩展消息。ExpType定义了具体的消息类型。</p>
<p>设置 Controller ID 消息<br>ExpType = 20。</p>
<p>消息体格式为：</p>
<p>字段    占用空间<br>0    0    6字节<br>1    Controller ID    uint16<br>设置 Packet In format 消息<br>ExpType = 16。</p>
<p>消息体格式为：</p>
<p>字段    占用空间<br>0    packet in format    uint32<br>Packet In format的取值如下，支持 userdata 的是 NXPIF_NXT_PACKET_IN2：</p>
<pre><code>NXPIF_STANDARD       NxPacketInFormat = 0 /* OFPT_PACKET_IN for this OpenFlow version. */
NXPIF_NXT_PACKET_IN  NxPacketInFormat = 1 /* NXT_PACKET_IN (since OVS v1.1). */
NXPIF_NXT_PACKET_IN2 NxPacketInFormat = 2 /* NXT_PACKET_IN2 (since OVS v2.6). */</code></pre><p>NXM Packet In 2 消息<br>ExpType = 30。</p>
<p>消息体格式为ofp propert数组。</p>
<p>字段    占用空间<br>0    ofp property<br>struct ofpproperty</p>
<p>struct ofpproperty是一个TLV格式的结构体：</p>
<p>Type，Length，内容。</p>
<p>Type    Length    内容<br>其中Type如下：</p>
<pre><code>/* Packet. */
NXPINT_PACKET    = 0 /* Raw packet data. */
NXPINT_FULL_LEN  = 1 /* ovs_be32: Full packet len, if truncated. */
NXPINT_BUFFER_ID = 2 /* ovs_be32: Buffer ID, if buffered. */

/* Information about the flow that triggered the packet-in. */
NXPINT_TABLE_ID = 3 /* uint8_t: Table ID. */
NXPINT_COOKIE   = 4 /* ovs_be64: Flow cookie. */

/* Other. */
NXPINT_REASON       = 5 /* uint8_t, one of OFPR_*. */
NXPINT_METADATA     = 6 /* NXM or OXM for metadata fields. */
NXPINT_USERDATA     = 7 /* From NXAST_CONTROLLER2 userdata. */
NXPINT_CONTINUATION = 8 /* Private data for continuing processing. */</code></pre><p>对应 Type 内容的格式待补充。</p>
<p>其中 length 是内容长度+头部的字节数，一般是头部长度 = 4。对于 experimenter ofpproperty，头部长度是 = 12。</p>
<p>每个struct ofpproperty 占用的内存大小是 8 字节的整数倍，所以内容后面可能存在一定长度的 pad，内容为0。pad 的长度是 length 取整到8的整数倍之后减去 length 的结果。</p>
<p>补充下 Type = NXPINT_METADATA 的格式：</p>
<p>这种 Type 里面存储的数据是 flow 的 match 部分。ovs 支持 可扩展格式的 match，在 ovs 不支持可扩展 match 的时候，nirica 自己定义了一种可扩展 match 结构体格式 叫 nxm_match，后面 openflow 基于 nirica 的成果也定义出了可扩展的 match 格式叫 oxm_match。</p>
<p>现在我们使用的openflow 1.3，所以里面表达的是oxm_match。</p>
<p>NXPINT_METADATA 对应的内容也是一系列 类似TLV格式的结构体：</p>
<p>头部    内容<br>头部的格式为：</p>
<ul>
<li>::</li>
<li></li>
<li>+———————————-+—————+–+——————+</li>
<li>|            oxm_class             |   oxm_field   |hm|    oxm_length    |</li>
<li>+———————————-+—————+–+——————+</li>
<li></li>
<li>The oxm_class value of OFPXMC_NXM_0 or OFPXMC_NXM_1 can be used an</li>
<li>OpenFlow 1.2+ message to use a Nicira ‘nxm_field’ otherwise standard</li>
<li>OpenFlow fields are used when the oxm_class has a value of</li>
<li>OFPXMC_OPENFLOW_BASIC.</li>
</ul>
<p>oxm_length为内容的字节数。<br>对于match中的in_port栏位，oxm_class  = 0, oxm_field = 0, hm = 0.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/14/12_course/cs61b/2018-07-13-Heap%20and%20Priority%20Queue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lrouter">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lrouter的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/14/12_course/cs61b/2018-07-13-Heap%20and%20Priority%20Queue/" itemprop="url">12_course/cs61b/2018-07-13-Heap and Priority Queue</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-14T22:55:07+08:00">
                2019-11-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E7%A8%8B/" itemprop="url" rel="index">
                    <span itemprop="name">课程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Heap-and-Priority-Queue"><a href="#Heap-and-Priority-Queue" class="headerlink" title="Heap and Priority Queue"></a>Heap and Priority Queue</h1><h2 id="Priority-Queue"><a href="#Priority-Queue" class="headerlink" title="Priority Queue"></a>Priority Queue</h2><p>优先级队列，是指一种内部元素按照优先级存储的队列。</p>
<p>队列对外是一种顺序访问的结构，但是其内部可以采用多种数据结构来实现。</p>
<p>我们可以往优先级队列里面添加元素，读取或者删除元素，获取队列内当前的元素个数。</p>
<p>(Min) Priority Queue 是一种按照递增顺序排序的优先级队列。我们读取或者删除的元素。</p>
<p>它的特点是，我们当前从队列中读取或者删除的元素，永远是该队列中现有元素中最小的。</p>
<p>(Min) Priority Queue 的定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/** (Min) Priority Queue: Allowing tracking and removal of the</span></span><br><span class="line"><span class="comment">  * smallest item in a priority queue. */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MinPQ</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">	<span class="comment">/** Adds the item to the priority queue. */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Item x)</span></span>;</span><br><span class="line">	<span class="comment">/** Returns the smallest item in the priority queue. */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Item <span class="title">getSmallest</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">/** Removes the smallest item from the priority queue. */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Item <span class="title">removeSmallest</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">/** Returns the size of the priority queue. */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>它是一种接口，说明其内部的实现方式可以是多种。</p>
<h2 id="应用场合"><a href="#应用场合" class="headerlink" title="应用场合"></a>应用场合</h2><p>想象一下，您是Grand Leader的信息合规性和幸福增强（GLICHE）团队的一员。<br>你的工作是监测市民们的聊天信息，以确保他们的会话是和谐的。<br>每天，你需要准备一份报告。报告当中是当天最不和谐的 M 条聊天信息。信息之间的先后顺序使用 HarmoniousnessComparator 来确定。</p>
<p>最原始的实现方案：创建 1 个 list 用于存储当天所有的聊天记录。然后使用 HarmoniousnessComparator 对其进行排序，并最终返回前 M 条最大的信息。<br>假设当天所有的聊天记录是 N 条，那么就需要 N 个存储空间。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">unharmoniousTexts</span><span class="params">(Sniffer sniffer, <span class="keyword">int</span> M)</span> </span>&#123;</span><br><span class="line">    ArrayList&lt;String&gt; allMessages = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    	<span class="keyword">for</span> (Timer timer = <span class="keyword">new</span> Timer(); timer.hours() &lt; <span class="number">24</span>; ) &#123;</span><br><span class="line">        	allMessages.add(sniffer.getNextMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Comparator&lt;String&gt; cmptr = <span class="keyword">new</span> HarmoniousnessComparator();</span><br><span class="line">	Collections.sort(allMessages, cmptr, Collections.reverseOrder());</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> allMessages.sublist(<span class="number">0</span>, M);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>改进的实现方案：只存储 M 条聊天记录。<br>可以看到，我们只需要 M 个存储空间。每次超过 M 条记录，就把其中最小的丢弃，这样存储的总是前 M 个最不和谐的聊天记录。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">unharmoniousTexts</span><span class="params">(Sniffer sniffer, <span class="keyword">int</span> M)</span> </span>&#123;</span><br><span class="line">    	Comparator&lt;String&gt; cmptr = <span class="keyword">new</span> HarmoniousnessComparator();</span><br><span class="line">    	MinPQ&lt;String&gt; unharmoniousTexts = <span class="keyword">new</span> HeapMinPQ&lt;Transaction&gt;(cmptr);</span><br><span class="line">    	<span class="keyword">for</span> (Timer timer = <span class="keyword">new</span> Timer(); timer.hours() &lt; <span class="number">24</span>; ) &#123;</span><br><span class="line">        	unharmoniousTexts.add(sniffer.getNextMessage());</span><br><span class="line">        <span class="keyword">if</span> (unharmoniousTexts.size() &gt; M) </span><br><span class="line">           &#123; unharmoniousTexts.removeSmallest(); &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ArrayList&lt;String&gt; textlist = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">    	<span class="keyword">while</span> (unharmoniousTexts.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            textlist.add(unharmoniousTexts.removeSmallest());</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> textlist;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么我们如何来实现 MinPQ 呢？</p>
<h2 id="MinPQ-的实现方法"><a href="#MinPQ-的实现方法" class="headerlink" title="MinPQ 的实现方法"></a>MinPQ 的实现方法</h2><p>我们可以使用多种方式来实现这种优先级队列。</p>
<h2 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h2><p>使用改良的 Binary Tree 来实现:</p>
<ul>
<li>Tree is Complete. 除了树最底下一层的元素可以缺少外，其他层的元素都必须是full的。也就是 1 个 root 下面有 2 个 child。<br>底层的元素尽量往左排。</li>
<li>每个 root 都比其所有的 child 小。</li>
</ul>
<h2 id="Heap-的实现"><a href="#Heap-的实现" class="headerlink" title="Heap 的实现"></a>Heap 的实现</h2><p>swim<br>sink</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/14/12_course/cs61b/2018-05-06-list-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lrouter">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lrouter的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/14/12_course/cs61b/2018-05-06-list-01/" itemprop="url">12_course/cs61b/2018-05-06-list-01</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-14T22:55:07+08:00">
                2019-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-list"><a href="#1-list" class="headerlink" title="1. list"></a>1. list</h2><p>list是一种包含有一系列数据的数据结构，数据的排列方式是一个接着一个的。</p>
<p>list里面的数据，可以重复。</p>
<p>list数据结构，可以使用链表实现，因为链表就是1个接着1个的序列：</p>
<ul>
<li>每个节点保存1个数据;</li>
<li>当前的节点指向下一个节点。这样所有的节点就一个接一个的串接起来了，形成1个序列。</li>
</ul>
<p>list数据结构，也可以使用数组来实现，因为数组的元素都是1个挨着1个的:</p>
<ul>
<li>每个元素保存1个数据；</li>
<li>每个元素都可以直接通过数组的索引来访问。</li>
</ul>
<h2 id="2-对外的API接口"><a href="#2-对外的API接口" class="headerlink" title="2. 对外的API接口"></a>2. 对外的API接口</h2><p>用户通过list对外提供的API接口，来使用list，而不用去关心API的内部实现到底是链表还是数组。</p>
<p>用户只是想要list这种数据结构的特性，也就是1个接1个的数据序列，数据可以重复。</p>
<p>API接口对用户呈现出了这些list的特性，但是隐藏了list的内部实现。</p>
<h2 id="3-链表的实现-LinkedList"><a href="#3-链表的实现-LinkedList" class="headerlink" title="3. 链表的实现 - LinkedList"></a>3. 链表的实现 - LinkedList</h2><p>我们想要用链表来实现list，那么就需要知道链表的特点：</p>
<ul>
<li>链表是由结点(node)构成的；</li>
<li>结点内部存储了1个数据，也存储了下一个节点的“指针”；</li>
<li>要访问某个结点，只能挨个遍历所有结点，直到找到目的结点为止；慢；</li>
<li>在链表中间做插入和删除运算；很快；</li>
</ul>
<p>我们先来通过链表实现1个存储int型数据的list。</p>
<h3 id="3-1-laked-linkedlist"><a href="#3-1-laked-linkedlist" class="headerlink" title="3.1 laked linkedlist"></a>3.1 laked linkedlist</h3><p>我们这样定义链表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class IntList &#123;</span><br><span class="line">   public int first;</span><br><span class="line">   public IntList rest;</span><br><span class="line"> </span><br><span class="line">   public IntList(int f, IntList r) &#123;</span><br><span class="line">      first = f;</span><br><span class="line">      rest = r;</span><br><span class="line">   &#125;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样定义的链表是一种递归模式的链表：</p>
<ul>
<li>每个结点，存储了1个数据；</li>
<li>每个结点，又指向了余下的链表。注意是链表，而不是结点。</li>
</ul>
<p>我们这样来使用链表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">IntList L = new IntList(15, null);</span><br><span class="line">L = new IntList(10, L);</span><br><span class="line">L = new IntList(5, L);</span><br><span class="line">int x = L.first;</span><br></pre></td></tr></table></figure>

<p>可见，作为用户而言，每次我们都得定义出1个新结点点，并需要将该结点和前面的结点联系起来。</p>
<p>我们作为用户使用list，只想每次往list添加和删除数据，并不想自己来维护结点之间的联系。</p>
<p>数据一个接一个的排列，这是list本身的特性，怎么维护和实现这个排列应该由list数据结构的实现者来做。</p>
<p>所以我们做个改进。</p>
<h3 id="3-2-improvement-linked-list"><a href="#3-2-improvement-linked-list" class="headerlink" title="3.2 improvement linked list"></a>3.2 improvement linked list</h3><p>我们先定义linkedlist的结点：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class IntNode &#123;</span><br><span class="line">   public int item;</span><br><span class="line">   public IntNode next;</span><br><span class="line"> </span><br><span class="line">   public IntNode(int i, IntNode n) &#123;</span><br><span class="line">   	  item = i;</span><br><span class="line">   	  next = n;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后我们定义出基于结点的链表。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class SLList &#123;</span><br><span class="line">   public IntNode first;</span><br><span class="line"> </span><br><span class="line">   public SLList(int x) &#123;</span><br><span class="line">      first = new IntNode(x, null);</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   public void addFirst(int x) &#123;</span><br><span class="line">      first = new IntNode(x, first);</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   public int getFirst() &#123;</span><br><span class="line">  	  return first.item;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们将链表的结点隐藏在了链表内部，并对外提供了添加和获取数据的方法。</p>
<p>这样用户就不需要去维护结点之间的关系，这些关系由我们实现者来维护。对于用户而言，使用起来更为简洁，而且也不容易犯错。</p>
<p>最后，我们来看看使用改进后的链表的例子。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SLList L = new SLList(15);</span><br><span class="line">L.addFirst(10);</span><br><span class="line">L.addFirst(5); 	</span><br><span class="line">int x = L.getFirst();</span><br></pre></td></tr></table></figure>

<p>可见，我们先定义出了1个链表，后面我们就只管往里面添加和查询数据。</p>
<h3 id="3-3-nested-class"><a href="#3-3-nested-class" class="headerlink" title="3.3 nested class"></a>3.3 nested class</h3><p>我们可以将class IntNode 定义在SLList的内部，访问范围位private。</p>
<p>如果IntNode没有使用外面类的具体对象的变量或者方法，还可以定义成static的，这样可以节省一些内存空间。</p>
<h3 id="3-4-size"><a href="#3-4-size" class="headerlink" title="3.4 size"></a>3.4 size</h3><p>我们想要获取list的size。通过定义1个函数size()来实现。</p>
<p>size()函数，通过遍历list的所有结点，来计算list的长度。</p>
<p>但是这样太慢了。有没有改进的方法。</p>
<p>我们可以在list内部维护1个size变量来缓存list的长度，这样每当添加或者删除1个元素时，我们改变size。</p>
<p>当需要获取size时，我们就直接返回size变量。</p>
<h3 id="3-5-Representing-the-Empty-List"><a href="#3-5-Representing-the-Empty-List" class="headerlink" title="3.5 Representing the Empty List"></a>3.5 Representing the Empty List</h3><p>如果1个list是空的怎么办，那么我们需要改变前面的实现：</p>
<h4 id="3-5-1-list指针为null"><a href="#3-5-1-list指针为null" class="headerlink" title="3.5.1 list指针为null"></a>3.5.1 list指针为null</h4><p>我们在创建1个SLList时，将first也就是链表的指针设置为null。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class SLList &#123;</span><br><span class="line">   private IntNode first;</span><br><span class="line">   private int size;</span><br><span class="line"> </span><br><span class="line">   public SLList() &#123;</span><br><span class="line">      first = null;</span><br><span class="line">      size = 0;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   public void addLast(int x) &#123;</span><br><span class="line">      size += 1;</span><br><span class="line">      IntNode p = first;</span><br><span class="line">      while (p.next != null) &#123;</span><br><span class="line">         p = p.next;</span><br><span class="line">      &#125;</span><br><span class="line"> </span><br><span class="line">      p.next = new IntNode(x, null);</span><br><span class="line">   &#125; ...</span><br></pre></td></tr></table></figure>

<p>这样一来，我们就得改变addFirst和addLast方法，在往链表添加结点时，需要判断链表是否是空的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public void addLast(int x) &#123;</span><br><span class="line">  size += 1;</span><br><span class="line"></span><br><span class="line">  if (first == null) &#123;</span><br><span class="line">    first = new IntNode(x, null);</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  IntNode p = first;</span><br><span class="line">  while (p.next != null) &#123;</span><br><span class="line">    p = p.next;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  p.next = new IntNode(x, null);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>删除时也得判断出这个特殊得情况，我们人类的大脑工作记忆是有限的。</p>
<p>有没有办法，可以将这个特殊情况简化，当作普通情况处理呢？有的。</p>
<h4 id="3-5-2-哨兵结点"><a href="#3-5-2-哨兵结点" class="headerlink" title="3.5.2 哨兵结点"></a>3.5.2 哨兵结点</h4><p>那就是再增加1个哨兵结点，这个sentinel结点，和普通的结点没有什么区别，只是里面不存储用户的数据。也就是不算在用户数据之类。</p>
<p>size变量也不会统计sentinel结点。</p>
<p>有了这个sentinel结点，在增加和删除数据时，我们就方便很多，不需要记住那么多特殊情况了。</p>
<p><b>Invariants</b></p>
<p>An invariant is a condition that is guaranteed to be true during code execution (assuming there are no bugs in your code).</p>
<p>An SLList with a sentinel node has at least the following invariants:</p>
<ul>
<li>The sentinel reference always points to a sentinel node.</li>
<li>The first node (if it exists), is always at sentinel.next.</li>
<li>The size variable is always the total number of items that have been added.</li>
</ul>
<p>Invariants make it easier to reason about code:</p>
<ul>
<li>Can assume they are true to simplify code (e.g. addLast doesn’t need to worry about nulls).</li>
<li>Must ensure that methods preserve invariants.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class SLList &#123;</span><br><span class="line">   private IntNode sentinel;</span><br><span class="line">   private int size;</span><br><span class="line"> </span><br><span class="line">   public SLList() &#123;</span><br><span class="line">      sentinel = new IntNode(x, null);</span><br><span class="line">      size = 0;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   public void addLast(int x) &#123;</span><br><span class="line">      size += 1;</span><br><span class="line">      IntNode p = sentinel;</span><br><span class="line">      while (p.next != null) &#123;</span><br><span class="line">         p = p.next;</span><br><span class="line">      &#125;</span><br><span class="line"> </span><br><span class="line">      p.next = new IntNode(x, null);</span><br><span class="line">   &#125; ...</span><br></pre></td></tr></table></figure>



<h2 id="4-数组的实现-ArrayList"><a href="#4-数组的实现-ArrayList" class="headerlink" title="4 数组的实现 - ArrayList"></a>4 数组的实现 - ArrayList</h2><p>同样的，我们想使用数组来实现list，就需要知道数组的特点。</p>
<ul>
<li>数组是固定长度的；</li>
<li>数组的每个元素都是同样的类型，一个挨着一个排列；</li>
<li>访问数组的元素，通过元素的索引就可以访问到，很快；</li>
<li>在数组前面添加元素很慢，在后面添加很快；</li>
<li>在数组中间插入和删除元素，很慢。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/14/12_course/cs61b/2018-05-06-deque-ArrayDeque/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lrouter">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lrouter的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/14/12_course/cs61b/2018-05-06-deque-ArrayDeque/" itemprop="url">12_course/cs61b/2018-05-06-deque-ArrayDeque</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-14T22:55:07+08:00">
                2019-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-Deque"><a href="#1-Deque" class="headerlink" title="1. Deque"></a>1. Deque</h2><p>Queue是一个单端口队列，一边进，从另一边出。</p>
<p>Deque是一个双端口队列，两边都可以进出。</p>
<p>双端队列可以实现单端队列的先入先出的方式，也可以实现栈结构的先入后出的方式，使用比较灵活，看具体需求。</p>
<h2 id="2-ArrayQueue"><a href="#2-ArrayQueue" class="headerlink" title="2. ArrayQueue"></a>2. ArrayQueue</h2><p>为了使用数组来实现Deque数据结构，我们先来看看，如何使用数组实现Queue数据结构。</p>
<p>Queue的特点是一边进，一边出的，如下图所示：</p>
<p><img src="https://images2017.cnblogs.com/blog/1100338/201709/1100338-20170912223228172-1608032280.png" alt="ArrayQueue"></p>
<h3 id="2-1-Invariants"><a href="#2-1-Invariants" class="headerlink" title="2.1 Invariants"></a>2.1 Invariants</h3><p>使用数组实现Queue，是要明白Queue的以下<b>Invariants</b>:</p>
<ul>
<li>Queue有队头和队尾的。从队头删除数据，从队尾插入数据；</li>
<li>第一个插入的数据，总是第一个被删除。</li>
<li>要从Queue取出数据，就直接将队头的位置数据删除，队头的位置 + 1；</li>
<li>要往Queue插入数据，就直接在队尾的位置插入数据，队尾的位置 + 1；</li>
<li>要从Queue中查询数据，可以根据指定index来获取。</li>
</ul>
<p>对于Queue的使用者而言，他不会关心Queue的内部实现是链表还是数组。</p>
<p>他只想有一种满足以上Invariants的数据结构，可以往里面加入和取出数据。并且也不会关心队头和队尾的位置。</p>
<p>作为Queue的实现者而言，我们选择数组作为实现来存储具体的数据，还需要2个位置变量，分别标识出队头和队尾。</p>
<p>并提供方法从队列中删除和添加数据。</p>
<h3 id="2-2-定义"><a href="#2-2-定义" class="headerlink" title="2.2 定义"></a>2.2 定义</h3><p>类的定义如下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class ArrayQueue&lt;T&gt;&#123;</span><br><span class="line">    private T stuff[];</span><br><span class="line">    private int head, tail;</span><br><span class="line">    private int size;</span><br><span class="line">  </span><br><span class="line">    public ArrayDeque()&#123;</span><br><span class="line">        stuff = (T[]) new Object[8];</span><br><span class="line">        head = tail = 0;</span><br><span class="line"></span><br><span class="line">        size = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void addLast(T item)&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    public T removeFirst() &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    public T get(int index)&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    public boolean isEmpty()&#123;&#125;</span><br><span class="line">  </span><br><span class="line">    public int size()&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-实现"><a href="#2-3-实现" class="headerlink" title="2.3 实现"></a>2.3 实现</h3><p>在队尾添加数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">public class ArrayQueue&lt;T&gt;&#123;</span><br><span class="line">    private T stuff[];</span><br><span class="line">    private int head, tail;</span><br><span class="line">    private int size;</span><br><span class="line">  </span><br><span class="line">    public ArrayDeque()&#123;</span><br><span class="line">        stuff = (T[]) new Object[8];</span><br><span class="line">        head = tail = 0;</span><br><span class="line"></span><br><span class="line">        size = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void addLast(T item)&#123;</span><br><span class="line">        stuff[tail] = item;</span><br><span class="line">        tail += 1;</span><br><span class="line">        size += 1;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public T removeFirst() &#123;</span><br><span class="line">        T node = stuff[head];</span><br><span class="line">        head += 1;</span><br><span class="line">        size -= 1;</span><br><span class="line">        return node;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public T get(int index)&#123;</span><br><span class="line">        return stuff[index];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean isEmpty()&#123;</span><br><span class="line">        return size == 0;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public int size()&#123;</span><br><span class="line">        return size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-改进1"><a href="#2-3-改进1" class="headerlink" title="2.3 改进1"></a>2.3 改进1</h3><p>我们现在已经实现了ArrayQueue的基本框架，但是还有些问题。</p>
<p>随着插入和删除数据，队头和队尾的位置一直都在增加，不会减少，很快就会超过内部数据的尾部。</p>
<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th align="center">2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td align="center">a</td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>e</td>
</tr>
<tr>
<td></td>
<td></td>
<td align="center">head</td>
<td></td>
<td></td>
<td></td>
<td>tail</td>
</tr>
</tbody></table>
<p>现在我们再往数组里面添加数据，tail就超过数组的边界了，但是其实队头空出来的位置被浪费掉了，不能被用来存储新数据。</p>
<p>head也会出现同样的情况。</p>
<p>怎么解决超过数据边界，以及内存浪费的问题呢？</p>
<p>办法就是使用circle queue，也就是循环队列。</p>
<p>我们可以把数组的头部和尾部连接起来，当tail要溢出数组边界的时候，我们让他回到数组的开头，继续添加数据。</p>
<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th align="center">2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
</tr>
</thead>
<tbody><tr>
<td>f</td>
<td></td>
<td align="center">a</td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>e</td>
</tr>
<tr>
<td>tail</td>
<td></td>
<td align="center">head</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>更新队头和队尾位置的方法，就是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public void addLast(T item)&#123;</span><br><span class="line">    stuff[tail] = item;</span><br><span class="line">    tail = (tail + 1) % stuff.length;</span><br><span class="line">    size += 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public T removeFirst() &#123;</span><br><span class="line">    T node = stuff[head];</span><br><span class="line">    head = (head + 1) % stuff.length;</span><br><span class="line">    size -= 1;</span><br><span class="line">    return node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public T get(int index)&#123;</span><br><span class="line">    int p = (head + index) % stuff.length;</span><br><span class="line">        return stuff[p];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-4-改进2-判断队列空和满的状态"><a href="#2-4-改进2-判断队列空和满的状态" class="headerlink" title="2.4 改进2 判断队列空和满的状态"></a>2.4 改进2 判断队列空和满的状态</h3><p>判断队列和满的状态，有好几种方法。</p>
<p>我们采用的方式是，在内部维护一个size变量表示队列中数据的实际数目。</p>
<p>每次插入和删除数据的时候，都会更新size变量。</p>
<p>每次插入和删除数据的时候，也会判断size变量，看队列是否满了或者空了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public void addLast(T item)&#123;</span><br><span class="line">    if(size == stuff.length)</span><br><span class="line">        return;</span><br><span class="line">    stuff[tail] = item;</span><br><span class="line">    tail = (tail + 1) % stuff.length;</span><br><span class="line">    size += 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public T removeFirst() &#123;</span><br><span class="line">    if(size == 0)</span><br><span class="line">        return null;</span><br><span class="line">    T node = stuff[head];</span><br><span class="line">    head = (head + 1) % stuff.length;</span><br><span class="line">    size -= 1;</span><br><span class="line">    return node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public T get(int index)&#123;</span><br><span class="line">    int p = (head + index) % stuff.length;</span><br><span class="line">        return stuff[p];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-动态更新数组的长度"><a href="#2-5-动态更新数组的长度" class="headerlink" title="2.5 动态更新数组的长度"></a>2.5 动态更新数组的长度</h3><p>上面的实现，已经基本满足队列的要求了。</p>
<p>不过上面的队列长度是固定的，只能存储固定数目的数据。</p>
<p>如果要实现队列长度不受限制，可以根据需要动态变化怎么办呢？</p>
<p>这样，我们就需要动态更新数组的长度。使用链表实现队列，不需要考虑这个问题，因为链表的长度本身就是动态变化的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 保证新数组长度是2^n</span><br><span class="line"> */</span><br><span class="line">private void doubleCapacity()&#123;</span><br><span class="line">    assert head == tail;</span><br><span class="line"></span><br><span class="line">    int p = head;</span><br><span class="line">    int n = size;</span><br><span class="line">    int r = n - p;</span><br><span class="line">    int capacity = stuff.length * 2;</span><br><span class="line">    T[] temp = (T[]) new Object[capacity];</span><br><span class="line">    System.arraycopy(stuff, p, temp, 0, r);</span><br><span class="line">    System.arraycopy(stuff, 0, temp, r, p);</span><br><span class="line"></span><br><span class="line">    stuff = temp;</span><br><span class="line">    head = 0;</span><br><span class="line">    tail = n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">    * 如果使用率 &lt; 0.25，则将数组的长度砍掉一半</span><br><span class="line">    */</span><br><span class="line">private void shrinkCapcity()&#123;</span><br><span class="line">    assert head == tail;</span><br><span class="line"></span><br><span class="line">    int p = head;</span><br><span class="line">    int n = size;</span><br><span class="line">    int capacity = stuff.length / 2;</span><br><span class="line">    T[] temp = (T[]) new Object[capacity];</span><br><span class="line">    if(p + n &lt; stuff.length)&#123;</span><br><span class="line">        System.arraycopy(stuff, p, temp, 0, n);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        int size1 = stuff.length - p;</span><br><span class="line">        int size2 = size - size1;</span><br><span class="line">        System.arraycopy(stuff, p, temp, 0, size1);</span><br><span class="line">        System.arraycopy(stuff, 0, temp, size1, size2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    stuff = temp;</span><br><span class="line">    head = 0;</span><br><span class="line">    tail = n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么在每次插入数据的时候，如果队列满了，我们先增加数组的长度，然后复制旧的数据到新数组中。最后再在新数组的tail位置，插入新数据。</p>
<p>删除数据也是一样的，就不再多加描述了。上代码吧。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public void addLast(T item)&#123;</span><br><span class="line">    if(size == stuff.length)</span><br><span class="line">        doubleCapacity();</span><br><span class="line">    stuff[tail] = item;</span><br><span class="line">    tail = (tail + 1) % stuff.length;</span><br><span class="line">    size += 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public T removeFirst() &#123;</span><br><span class="line">    if(size == 0)</span><br><span class="line">        return null;</span><br><span class="line">    T node = stuff[head];</span><br><span class="line">    head = (head + 1) % stuff.length;</span><br><span class="line">    size -= 1;</span><br><span class="line">    </span><br><span class="line">    double usage = (double)size / (double) stuff.length;</span><br><span class="line">    if(usage &lt; 0.25)</span><br><span class="line">        shrinkCapcity();</span><br><span class="line">        </span><br><span class="line">    return node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-ArrayDeque"><a href="#3-ArrayDeque" class="headerlink" title="3. ArrayDeque"></a>3. ArrayDeque</h2><p>好了，兜了一大圈，现在我们终于开始要讲讲如何使用数组实现Deque了。</p>
<p>我们先来看看Deque的数据结构，</p>
<p><img src="https://images2017.cnblogs.com/blog/989441/201708/989441-20170804105503537-2079543476.png" alt="ArrayDeque"></p>
<h3 id="3-1-Deque的Invariants"><a href="#3-1-Deque的Invariants" class="headerlink" title="3.1 Deque的Invariants"></a>3.1 Deque的Invariants</h3><p>按照实现ArrayQueue的思路，我们先明确一下Deque的Invariants。</p>
<ul>
<li>双端口队列也有队头和队尾，但是两边都可以插入和删除数据;</li>
<li>往队头插入数据时，head = head - 1，然后往head位置填入数据;</li>
<li>往队尾插入数据时，往tail位置填入数据，然后tail = tail + 1;</li>
<li>从队头删除数据时，取出head位置的数据，然后head = head + 1;</li>
<li>从队尾删除数据时，tail = tail - 1，然后取出tail位置的数据。</li>
</ul>
<h3 id="3-2-实现"><a href="#3-2-实现" class="headerlink" title="3.2 实现"></a>3.2 实现</h3><p>实现时，依旧有一个存放数据的数组，以及head和tail指针。</p>
<p>只是在queue的基础上，增加了2个方法：</p>
<ul>
<li>addFirst(T item);</li>
<li>T removeLast();</li>
</ul>
<p>然后我们再加上队头和队尾位置溢出的处理方法：</p>
<ul>
<li>当head或者tail 加1的时候，我们使用 (head + 1) % stuff.length;</li>
<li>当head或者tail 减1的时候，我们使用 (head - 1 + stuff.length) % stuff.length;</li>
</ul>
<p>代码就完工了。是不是很简单 :)</p>
<p>代码请参考:</p>
<p><a href="https://github.com/lrouter/skeleton-sp18/blob/master/proj1a/ArrayDeque.java" target="_blank" rel="noopener">ArrayDeque</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/14/12_course/cs61b/2018-05-06-Abstract%20Data%20Structure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lrouter">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lrouter的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/14/12_course/cs61b/2018-05-06-Abstract%20Data%20Structure/" itemprop="url">12_course/cs61b/2018-05-06-Abstract Data Structure</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-14T22:55:07+08:00">
                2019-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Two-more-use-for-interfaces"><a href="#Two-more-use-for-interfaces" class="headerlink" title="Two more use for interfaces"></a>Two more use for interfaces</h2><ul>
<li>Specify a contract for common behavior shared by many data structures (e.g. implementing OurCamparable means Dogs can be compared)</li>
<li>Provide a way to containerize common functions(e.g the OffByN CharacterComparator lets us compare two characters in a special way).</li>
</ul>
<h2 id="The-Stack-ADT"><a href="#The-Stack-ADT" class="headerlink" title="The Stack ADT"></a>The Stack ADT</h2><p>单端口，只会从这个端口插入和删除数据。</p>
<p>The Stack ADT supports the following operations:</p>
<ul>
<li>push(int x): Puts x on top of the stack.</li>
<li>int pop(): Removes and returns the top item from the stack</li>
</ul>
<p>which implemtation do think would result in faster overall performance?<br>A. Linked List<br>B. Array</p>
<p>Answer A</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/14/12_course/cs61a/2017-03-22-SICP-lecture15%20Objects/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lrouter">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lrouter的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/14/12_course/cs61a/2017-03-22-SICP-lecture15%20Objects/" itemprop="url">12_course/cs61a/2017-03-22-SICP-lecture15 Objects</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-14T22:55:07+08:00">
                2019-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Objects"><a href="#Objects" class="headerlink" title="Objects"></a>Objects</h2><p>Class是一种数据抽象的方式，将信息和加工信息的方法集成起来，组成一个复合的类型。</p>
<p>Class是object的模板，代表了所有object应该对外表项的行为，也就是和外界传递message的通道。</p>
<p>使用如下的方式来定义一个class：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">class &lt;name&gt;:</span><br><span class="line">  suites</span><br></pre></td></tr></table></figure>

<p>例如，我们定义了1个class，Account:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Account:</span><br><span class="line"></span><br><span class="line">    def __init__(self, account_holder):</span><br><span class="line">        self.account_holder = account_holder</span><br><span class="line">        self.ballance = 0</span><br><span class="line"></span><br><span class="line">    def deposit(self, amount):</span><br><span class="line">        self.ballance = self.ballance + amount</span><br><span class="line">        return self.ballance</span><br><span class="line"></span><br><span class="line">    def withdraw(self, amount):</span><br><span class="line">        if amount &gt; self.ballance:</span><br><span class="line">            return &apos;Insufficicent funds.&apos;</span><br><span class="line">        else:</span><br><span class="line">            self.ballance = self.ballance - amount</span><br><span class="line">            return self.ballance</span><br></pre></td></tr></table></figure>

<p>我们定义了class的constructor, <strong>init</strong>方法。该方法有两个参数，1个self，1个account_holder。</p>
<p>self代表object，而不是class。</p>
<p>我们使用如下的方式创建2个Account object。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">john_account = Account(&apos;john&apos;)</span><br><span class="line">jack_account = Account(&apos;jack&apos;)</span><br></pre></td></tr></table></figure>
<p>调用Account实际上调用的是__init_方法，self就是被创建的object本身，account_holder binding to’john’。</p>
<p>2个oject有独立的attributes，attribute属于object。method body是属于class。</p>
<h2 id="operator"><a href="#operator" class="headerlink" title=". operator"></a>. operator</h2><p>.是1个操作符，用于创建复合表达式。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john_account.ballance = 10</span><br></pre></td></tr></table></figure>
<p>表示在john_account这个object的frame里面，查找ballance所binding的东西。</p>
<p>找到了，就执行赋值这个操作，将右边的value binding给它。</p>
<p>找不到，就继续在class的frame找。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john_account.deposit(100)</span><br></pre></td></tr></table></figure>
<p>表示在john_account这个object的frame里面，查找deposit这个name所binding的东西。</p>
<p>如果找不到，就在class的frame里面，查找。</p>
<h2 id="method和function"><a href="#method和function" class="headerlink" title="method和function"></a>method和function</h2><p>method = object + function</p>
<p>bouding在object里面的function就是method。</p>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; john_account.withdraw(20)</span><br><span class="line">80</span><br><span class="line">&gt;&gt;&gt; Account.withdraw(john_account, 20)</span><br><span class="line">60</span><br></pre></td></tr></table></figure>
<p>两种方式都合法。</p>
<p>第1种调用method，通过. operator将john_account传递给self，而找到该方法将20传递给amount。</p>
<p>第2种调用function，直接将john_account传递给self，将20传递给amount。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/14/12_course/cs61a/2017-03-22-SICP-lecture14%20Mutable%20Functions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lrouter">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lrouter的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/14/12_course/cs61a/2017-03-22-SICP-lecture14%20Mutable%20Functions/" itemprop="url">12_course/cs61a/2017-03-22-SICP-lecture14 Mutable Functions</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-14T22:55:07+08:00">
                2019-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Mutable-Functions"><a href="#Mutable-Functions" class="headerlink" title="Mutable Functions"></a>Mutable Functions</h2><p>状态会变化的函数。</p>
<p>这种函数的父环境中，会保存有一个状态。</p>
<p>每次执行这个函数，父环境中的状态就会改变。导致每次调用函数，都会返回不同的值。</p>
<p>python使用了这种方法来实现Mutable 函数。</p>
<p>具体是2种方式：</p>
<ul>
<li>使用nonlocal声明状态。</li>
<li>使用变量保存状态</li>
</ul>
<pre><code>
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

# 不能在withdraw函数中，对balance做binding，也就是修改它的值
def make_withdraw(balance):
    def withdraw(amount):
        if amount &gt; balance:
            return &apos;Insufficient funds&apos;
        return balance
    return withdraw

# 可以在withdraw函数中，对balance做binding，也就是修改它的值
def make_withdraw_nonlocal(balance):
    def withdraw(amount):
        nonlocal balance
        if amount &gt; balance:
            return &apos;Insufficient funds&apos;
        balance = balance - amount
        return balance
    return withdraw

#使用变量来保存balance的函数，而不是nonlocal的声明，代码更容易阅读了。withdraw可以修改变量的值
def make_withdraw_var(balance):
    b = balance
    def withdraw(amount):
        nonlocal b
        if amount &gt; b:
            return &apos;Insufficient funds&apos;
        b = b - amount
        return b
    return withdraw</code></pre><p>Mutable 函数每次都会修改执行环境，所以破坏了下面的规则：</p>
<p>使用同样的值，去执行函数，期望得到同样的结果。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/14/12_course/cs61a/2017-03-22-SICP-lecture11%20Trees/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lrouter">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lrouter的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/14/12_course/cs61a/2017-03-22-SICP-lecture11%20Trees/" itemprop="url">12_course/cs61a/2017-03-22-SICP-lecture11 Trees</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-14T22:55:07+08:00">
                2019-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="tree的描述方式"><a href="#tree的描述方式" class="headerlink" title="tree的描述方式"></a>tree的描述方式</h2><ul>
<li><p>wooden tree</p>
<p>tree contains a root and branches.</p>
<p>a branch is a tree.</p>
<p>a tree has no branches is called a leaf.</p>
</li>
<li><p>family tree</p>
<p>tree contains nodes.</p>
<p>node contains a label.</p>
<p>a node is either a parent or a child.</p>
</li>
</ul>
<h2 id="implementing-the-tree-abstraction"><a href="#implementing-the-tree-abstraction" class="headerlink" title="implementing the tree abstraction"></a>implementing the tree abstraction</h2><ul>
<li><p>A tree has a root label and a list of branches.</p>
</li>
<li><p>Each branch is a tree.</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/14/12_course/cs61a/2017-03-19-SICP-1.3%20Defining%20New%20Functions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lrouter">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lrouter的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/14/12_course/cs61a/2017-03-19-SICP-1.3%20Defining%20New%20Functions/" itemprop="url">12_course/cs61a/2017-03-19-SICP-1.3 Defining New Functions</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-14T22:55:07+08:00">
                2019-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-3-Defining-New-Functions"><a href="#1-3-Defining-New-Functions" class="headerlink" title="1.3 Defining New Functions"></a>1.3 Defining New Functions</h3><p>We have identified in Python some of the elements that must appear in any powerful programming language:</p>
<ul>
<li>Numbers and arithmetic operations are primitive built-in data values and functions.</li>
<li>Nested function application provides a means of combining operations.</li>
<li>Binding names to values provides a limited means of abstraction.</li>
</ul>
<p>The function max can take an arbitrary number of arguments. </p>
<p>It is rendered as max(…). Regardless of the number of arguments taken, all built-in functions will be rendered as <name>(…),<br>because these primitive functions were never explicitly defined.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/14/12_course/cs61a/2017-03-19-SICP-1.1%20Introduction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lrouter">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lrouter的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/14/12_course/cs61a/2017-03-19-SICP-1.1%20Introduction/" itemprop="url">12_course/cs61a/2017-03-19-SICP-1.1 Introduction</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-14T22:55:07+08:00">
                2019-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-1-4"><a href="#1-1-4" class="headerlink" title="1.1.4"></a>1.1.4</h3><p>In the end, we will find that all of these core concepts are closely related: function are objects, objects are functions, and interpreters are instances of both.</p>
<p>However, developing a clear understanding of each of these concepts and their role in organizing code is critical to mastering the art of programming.</p>
<h3 id="1-1-5-调试错误的技巧"><a href="#1-1-5-调试错误的技巧" class="headerlink" title="1.1.5 调试错误的技巧"></a>1.1.5 调试错误的技巧</h3><p>Learning to interpret errors and diagnose the cause of unexpected errors is called debugging. Some guiding principles of debugging are:</p>
<ul>
<li><p>Test incrementally: Every well-written program is composed of small, modular components that can be tested individually.<br>Try out everything you write as soon as possible to identify problems early and gain confidence in your components.</p>
</li>
<li><p>Isolate errors: An error in the output of a statement can typically be attributed to a particular modular component. When trying to diagnose a problem, trace the error to the smallest fragment of code you can before trying to correct it.</p>
</li>
<li><p>Check your assumptions: Interpreters do carry out your instructions to the letter — no more and no less. Their output is unexpected when the behavior of some code does not match what the programmer believes (or assumes) that behavior to be. Know your assumptions, then focus your debugging effort on verifying that your assumptions actually hold.</p>
</li>
<li><p>Consult others: You are not alone! If you don’t understand an error message, ask a friend, instructor, or search engine. If you have isolated an error, but can’t figure out how to correct it, ask someone else to take a look. A lot of valuable programming knowledge is shared in the process of group problem solving.</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">&lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">lrouter</p>
              <p class="site-description motion-element" itemprop="description">简单的背后并不简单</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">53</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lrouter</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
